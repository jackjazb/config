services:
  jellyfin:
    image: jellyfin/jellyfin
    container_name: jellyfin
    network_mode: 'host'
    volumes:
      - /home/jack/jellyfin/config:/config
      - /home/jack/jellyfin/cache:/cache
      - type: bind
        source: /home/jack/jellyfin/media/music
        target: /media
        read_only: true
    restart: 'unless-stopped'
  
  samba:
    image: dperson/samba
    container_name: samba
    environment:
      TZ: 'EST5EDT'
    network_mode: 'host'
    read_only: true
    tmpfs:
      - /tmp
    restart: unless-stopped
    stdin_open: true
    tty: true
    volumes:
      - type: bind
        source: /home/jack/jellyfin/media/music
        target: /mnt
        read_only: true
    command: '-s "Mount;/mnt;yes;yes;yes;all;none" -S'
  
  portainer:
    container_name: portainer
    image: portainer/portainer-ee:latest
    ports:
      - 9443:9443
      - 8000:8000
    volumes:
        - portainer_data:/data
        - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped
    
volumes:
  portainer_data: